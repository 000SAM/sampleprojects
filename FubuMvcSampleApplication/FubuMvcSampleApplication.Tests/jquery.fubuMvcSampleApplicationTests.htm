<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
	<head>
		<title>jquery.fubuMvcSampleApplicationTests</title>
		<script language="javascript" src="Content/Scripts/jquery-latest.min.js" type="text/javascript"></script>
        <script language="javascript" src="Content/Scripts/testrunner.js" type="text/javascript"></script>
        <script language="javascript" src="Content/Scripts/jquery.fubuMvcSampleApplication.js" type="text/javascript"></script>
        <link media="screen" href="Content/StyleSheets/testsuite.css" type="text/css" rel="stylesheet"/> 
	</head>
	<body>
	    <script language="javascript" type="text/javascript">
            // Save User
                        
            var UserId = "Id";
            var userObjectFromServer = { UserId: UserId, Message: "Test Message" };
            var getJSONStub = function(url, data, callback, format) {
                callback(userObjectFromServer);
            };
            var existing_getJSON = $.getJSON;            
            
            module("When you click on Save button", {
            	            
                setup: function() {
                    $.getJSON = getJSONStub;
                    $("#UserId").val(UserId);
                },
                teardown: function() {
                    $.getJSON = existing_getJSON;
                }
            });
            test("Should save the User and return a message", function() {
                expect(1);
                    SaveUser();
                    equals($("#message").html(), userObjectFromServer.Message);
            });            
            
            // Display User
                        
            var UserId = "Id";
            var userObjectFromServer = { UserId: UserId, LastName: "LastName", FirstName: "FirstName", Message: "Test Message" };
            var getJSONStub = function(url, data, callback, format) {
                callback(userObjectFromServer);
            };
            var existing_getJSON = $.getJSON;            
            
            module("When you click on DisplayUsingJson button", {
            	            
                setup: function() {
                    $.getJSON = getJSONStub;
                    $("#UserId").val(UserId);
                },
                teardown: function() {
                    $.getJSON = existing_getJSON;
                }
            });
            test("Should save the User and return a message", function() {
                expect(3);
                    Display();
                    equals($("#message").html(), userObjectFromServer.Message);
                    equals($("#LastName").val(), userObjectFromServer.LastName);
                    equals($("#FirstName").val(), userObjectFromServer.FirstName);
            });            
        </script>

        <h1>jquery.fubuMvcSampleApplicationTests</h1>
        <h2 id="banner"></h2>
        <ol id="tests"></ol>
        <div id="results"></div>
        <div id="main"></div>        
        <div id="saveUser">
            <div id = "message"></div>    
            <input type="text" name="UserId" value="" id="UserId" />
            <input type="text" name="LastName" value="" id="LastName" />
            <input type="text" name="FirstName" value="" id="FirstName" />
            <input type="text" name="DateOfBirth" value="" id="DateOfBirth" />
        </div>
	</body>
</html>